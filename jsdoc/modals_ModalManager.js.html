

<!DOCTYPE html>
<html lang="en">

<head>
  
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title> modals/ModalManager.js</title>

  <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="./build/entry.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <link href="https://fonts.googleapis.com/css?family=Roboto:100,400,700|Inconsolata,700" rel="stylesheet">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
  <link type="text/css" rel="stylesheet" href="https://jmblog.github.io/color-themes-for-google-code-prettify/themes/tomorrow-night.min.css">
  <link type="text/css" rel="stylesheet" href="styles/app.min.css">
  <link type="text/css" rel="stylesheet" href="styles/iframe.css">
  <link type="text/css" rel="stylesheet" href="">
  <script async defer src="https://buttons.github.io/buttons.js"></script>

  
</head>



<body class="layout small-header">
    <div id="stickyNavbarOverlay"></div>
    

<div class="top-nav">
    <div class="inner">
        <a id="hamburger" role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
        </a>
        <div class="logo">
            
            
        </div>
        <div class="menu">
            
            <div class="navigation">
                <a
                    href="index.html"
                    class="link"
                >
                    Documentation
                </a>
                
                
                
            </div>
        </div>
    </div>
</div>
    <div id="main">
        <div
            class="sidebar "
            id="sidebarNav"
        >
            
            <nav>
                
                    <h2><a href="index.html">Documentation</a></h2><div class="category"><h3>Classes</h3><ul><li><a href="Ball.html">Ball</a></li><li><a href="Board.html">Board</a></li><li><a href="Crater.html">Crater</a></li><li><a href="Finish.html">Finish</a></li><li><a href="Game.html">Game</a></li><li><a href="LeaderboardManager.html">LeaderboardManager</a></li><li><a href="Modal.html">Modal</a></li><li><a href="ModalManager.html">ModalManager</a></li><li><a href="MQTTManager.html">MQTTManager</a></li><li><a href="Obstacle.html">Obstacle</a></li><li><a href="Particle.html">Particle</a></li><li><a href="Physics.html">Physics</a></li><li><a href="Point.html">Point</a></li><li><a href="Simulation.html">Simulation</a></li><li><a href="Utility.html">Utility</a></li></ul></div>
                
            </nav>
        </div>
        <div class="core" id="main-content-wrapper">
            <div class="content">
                <header class="page-title">
                    <p>Source</p>
                    <h1>modals/ModalManager.js</h1>
                </header>
                



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Manages the visibility of all Modals
 */
class ModalManager {
    previousModal;
    currentModal;
    
    stopWatch
    pauseButton

    menuModal;
    leaderboardModal;
    helpModal;
    settingsModal;
    pauseModal;
    resultModal;

    /**
     * Create and initialize an instance of ModalManager
     */
    constructor() {
        this.previousModal = null;        
        this.currentModal = null;        

        this.stopWatch = document.querySelector("main .stopwatch");
        this.pauseButton = document.querySelector("main .pause-button");

        this.menuModal = new Modal("menu");
        this.leaderboardModal = new Modal("leaderboard");
        this.helpModal = new Modal("help");
        this.settingsModal = new Modal("settings");
        this.pauseModal = new Modal("pause");
        this.resultModal = new Modal("result");
    }
    
    /**
     * Show the start menu Modal
     * @returns {ModalManager} Returns itself for method chaining
     */
    showStartMenu() {
        this.showModal(this.menuModal);
        
        this.stopWatch.style.visibility = "hidden";
        this.pauseButton.style.visibility = "hidden";

        return this;
    }

    /**
     * Hide the start menu Modal
     * @returns {ModalManager} Returns itself for method chaining
     */
    hideStartMenu() {
        this.hideModal(this.menuModal);

        this.stopWatch.style.visibility = "visible";
        this.pauseButton.style.visibility = "visible";

        return this;
    }

    /**
     * Show the pause Modal
     */
    showPause() {
        this.showModal(this.pauseModal);
    }

    /**
     * Show the result Modal with filled in values
     * @param {number} time The completion time in milli seconds
     * @param {number} rank The achieved rank
     */
    showResults(time, rank) {
        this.showModal(this.resultModal);
        
        // write time in form
        this.resultModal.domElement.querySelector(".time .value span").textContent = time;

        // write rank in form
        this.resultModal.domElement.querySelector(".rank .value").textContent = rank;
        
        // empty name input field
        this.resultModal.domElement.querySelector(".name input").value = "";
    }

    /**
     * Show the leaderboard Modal.
     * @param {string} mode The appearance mode of the Modal. Possible values are "back" for a back button and "finish" for a home menu and restart button 
     */
    showLeaderboard(mode) {
        // change appearance of leaderbaord modal depending on mode
        let backButton = this.leaderboardModal.domElement.querySelector(".header button");
        let finishButtons = this.leaderboardModal.domElement.querySelector(".buttons");

        switch (mode) {
            case "back":
                backButton.style.display = "block";
                finishButtons.style.display = "none";
                break;
            
            case "finish":
                backButton.style.display = "none";
                finishButtons.style.display = "block";
                break;

            default:
                throw `ModalManager.showLeaderboard(mode): mode ${mode} does not exists!`;
        }
        if (mode != null) {

        }

        this.showModal(this.leaderboardModal);
    }

    /**
     * Show the help Modal
     */
    showHelp() {
        this.showModal(this.helpModal);
    }

    /**
     * Update the leaderboard table in the leaderboard Modal
     * @param {object[]} leaderboard Leaderboard Array consisting of {name, time} objects sorted ascending by time
     */
    updateLeaderboard(leaderboard) {
        // built table rows from data
        let rows = [];
        
        for (let i = 0; i &lt; leaderboard.length; i++) {
            let rank = i + 1;
            let name = leaderboard[i].name;
            let time = leaderboard[i].time;
            
            let rankCell = document.createElement("td");
            rankCell.appendChild(document.createTextNode(`${rank}.`));
            let nameCell = document.createElement("td");
            nameCell.appendChild(document.createTextNode(name));
            let timeCell = document.createElement("td");
            timeCell.appendChild(document.createTextNode(`${time.toFixed(2)}`));
            
            let row = document.createElement("tr");
            row.appendChild(rankCell);
            row.appendChild(nameCell);
            row.appendChild(timeCell);

            rows.push(row);
        }

        // get leaderboard table
        let table = this.leaderboardModal.domElement.querySelector("table");
        table.textContent = "";

        // append highscore rows at leaderboard
        rows?.forEach(row => table.appendChild(row));
    }

    /**
     * Show the settings Modal
     */
    showSettings() {
        this.showModal(this.settingsModal);
    }

    /**
     * Show the given Modal
     * @param {Modal} modal Modal thats going to be shown
     */
    showModal(modal) {
        // save current modal for back functionality &amp; hide it
        if (this.currentModal != null) {
            this.previousModal = this.currentModal;
            this.hideModal(this.currentModal);
        }
        
        // set new modal
        this.currentModal = modal;
        modal.domElement.style.visibility = "visible";
    }

    /**
     * Hide the given Modal
     * @param {Modal} modal Modal thats going to be hidden
     */
    hideModal(modal = null) {
        modal ??= this.currentModal;

        this.currentModal = null;
        modal.domElement.style.visibility = "hidden";
    }

    /**
     * Show the previous Modal and hide the current one
     */
    back() {
        if (this.previousModal == null) {
            this.hideModal();
        }
        else {
            this.showModal(this.previousModal);
        }
    }
}</code></pre>
        </article>
    </section>




            </div>
            
            <footer class="footer">
                <div class="content has-text-centered">
                    <p>Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.10</a></p>
                    <p class="sidebar-created-by">
                        <a href="https://github.com/SoftwareBrothers/better-docs" target="_blank">BetterDocs theme</a> provided with <i class="fas fa-heart"></i> by
                        <a href="http://softwarebrothers.co" target="_blank">SoftwareBrothers - JavaScript Development Agency</a>
                    </p>
                </div>
            </footer>
            
        </div>
        <div id="side-nav" class="side-nav">
        </div>
    </div>
<script src="scripts/app.min.js"></script>
<script>PR.prettyPrint();</script>
<script src="scripts/linenumber.js"> </script>


</body>
</html>
